<body>
    <div class="izq_1">
        <p>si quieres montar una editorial para esquizofrénicos yo te consigo los textos</p>
        <p>enviame tu manuscrito!!! <a href="mailto:rikamichie@gmail.com">rikamichie@gmail.com</a></p>
    </div>


    <div class="izq_3">
        <div class="lista_libros">

        </div>
    </div>

    <script>
  const RSS_URL = "https://rikamichie.substack.com/feed";
  const CORS_PROXY = "https://corsproxy.io/?";

  async function cargarPosts() {
    try {
      const response = await fetch(CORS_PROXY + encodeURIComponent(RSS_URL));
      if (!response.ok) throw new Error(`HTTP ${response.status}`);

      const xmlText = await response.text();            // → corregido: get text directamente
      const parser = new DOMParser();
      const xml = parser.parseFromString(xmlText, "text/xml");
      const items = xml.querySelectorAll("item");

      const contenedor = document.querySelector(".lista_libros");
      contenedor.innerHTML = "";  // limpia previamente

      items.forEach((item, idx) => {
        if (idx >= 5) return;

        const titulo = item.querySelector("title")?.textContent || "Sin título";
        const link = item.querySelector("link")?.textContent || "#";
        const fecha = item.querySelector("pubDate")?.textContent;
        const resumen = item.querySelector("description")?.textContent || "";

        const postHTML = `
          <div class="post">
            <h3><a href="${link}" target="_blank">${titulo}</a></h3>
            <p><em>${fecha ? new Date(fecha).toLocaleDateString() : ""}</em></p>
            <p>${resumen}</p>
          </div>`;
        contenedor.insertAdjacentHTML("beforeend", postHTML);
      });
    } catch (e) {
      console.error("Error al cargar RSS:", e);
    }
  }

  cargarPosts();
</script>

</body>